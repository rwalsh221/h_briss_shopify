{{ 'briss-customer-navigation.css' | asset_url | stylesheet_tag }}

{% comment %} <script src="{{ 'briss-customer-navigation.js' | asset_url }}" defer></script> {% endcomment %}
<script src="{{ 'briss-CustomerNavigationContainer.js' | asset_url }}" defer></script>

<customer-navigation-container >
    <div class="customer-navigation">
    <ul role="list">
        {% for block in section.blocks %}
              <li id="{{block.settings.element_id}}">
                <div class="customer-navigation__icon">
                    {{ images[block.settings.icon_url] | image_url: width:48, height: 48 | image_tag }}
                </div>
                {% render 'customer-navigation-content' 
                    navigation_content: block.settings.navigation_content 
                    element_id: block.settings.navigation_content_element_id%}
            </li>
        {% endfor %}
    </ul>
    </div>
</customer-navigation-container>

{% schema %}
{
    "name": "Customer Navigation",
    "tag": "div",
    "limit": 1,
    "settings": [
        {
            "type": "text",
            "id": "text",
            "label": "Text"
        },
        {
            "type": "color",
            "id": "color",
            "label": "Text color",
            "default": "#333"
        }
    ],
    "presets": [
        {
            "name": "Default Customer Navigation",
            "blocks": [
                {
                    "type": "navigation_link",
                    "settings": {
                        "icon_url":"icons_search.png",
                        "navigation_content": "search",
                        "element_id": "customer-navigation__search"
                    }
                },
                {
                    "type": "navigation_link",
                    "settings": {
                        "icon_url":"icons_customer.png",
                        "navigation_content": "customer",
                        "element_id": "customer-navigation__account"
                    }
                },
                {
                    "type": "navigation_link",
                    "settings": {
                        "icon_url":"icons_cart.png",
                        "navigation_content": "cart",
                        "element_id": "customer-navigation__cart",
                        "navigation_content_element_id": "customer-navigation-cart"
                    }
                }
            ]
        },
        {
            "name": "Cart Customer Navigation",
            "blocks": [
                {
                    "type": "navigation_link",
                    "settings": {
                        "icon_url":"icons_search.png",
                        "navigation_content": "search",
                        "element_id": "customer-navigation__search"
                    }
                },
                {
                    "type": "navigation_link",
                    "settings": {
                        "icon_url":"icons_customer.png",
                        "navigation_content": "customer",
                        "element_id": "customer-navigation__account"
                    }
                },
            ]
        },
    ],
    "blocks":[
        {
            "name": "Customer Navigation Link",
            "type": "navigation_link",
            "settings": [
                {
                    "type": "text",
                    "id": "icon_url",
                    "label": "Icon Url"
                },
                {
                    "type": "text",
                    "id": "navigation_content",
                    "label": "Navigation Content"
                },
                {
                    "type": "text",
                    "id": "element_id",
                    "label": "Element Id"
                },
                {
                    "type": "text",
                    "id": "navigation_content_element_id",
                    "label": "Navigation Content Element Id"
                }
            ]
        },
    ],
    "max_blocks": 3,
}
{% endschema %}